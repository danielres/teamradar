version: '2'

networks:
  neo4j-network:
    driver: bridge

services:
  neo4j:
    image: bitnami/neo4j:3.4.10
    volumes:
      - ./graphdb:/bitnami
      - ./graphdb/plugins:/bitnami/neo4j/plugins
    networks:
      - neo4j-network
    ports:
      - '7474:7474'
      - '7473:7473'
      - '7687:7687'
    depends_on:
      - fix-neo4j-permissions

  fix-neo4j-permissions:
    image: bitnami/neo4j:3.4.10
    user: root
    command: chown -R 1001:1001 /bitnami
    volumes:
      - ./graphdb/neo4j:/bitnami/neo4j
